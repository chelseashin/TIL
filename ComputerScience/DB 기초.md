DB는 생소한 용어가 많아서 요약된 내용가지고 이해하기 힘든듯, 기초 내용도 공부하기

https://coding-factory.tistory.com/214?category=784883

## DB 기초

:: 특정 조직의 업무를 수행하는 데 필요한 상호 관련된 데이터들의 모임

- DB 시스템: DB를 이용하여 자료를 정리하고 관리하여 정보를 얻어내는데 필요한 컴퓨터 중심의 시스템
- DB 시스템의 구성요소
  - DB
  - 스키마
  - DBMS(데이터베이스 관리 시스템)
  - DB 언어
  - DB 컴퓨터
  - DB 사용자

##### DBMS

- DBMS란 사용자와 DB 사이에서 사용자의 요구에 따라 정보를 생성해주고 DB를 관리해주는 SW이다.
- DBMS는 기존의 파일 시스템이 갖는 데이터의 종속성과 중복성의 문제를 해결하기 위해 제안된 시스템으로 모든 응용 프로그램들이 DB를 공용?할 수 있도록 관리해 준다.
- DBMS는 DB의 구성, 접근방법, 유지관리에 대한 모든 책임을 진다.

![DBMS](https://t1.daumcdn.net/cfile/tistory/99D7223C5B69928C1B)

- 발전 배경
  - 종속성으로 인한 문제점
    - 응용프로그램과 데이터 파일이 상호 의존적인 관계에서는 데이터 파일이 보조기억장치에 저장되는 방법이나 저장된 데이터의 접근 방법을 변경할 때 응용프로그램도 같이 변경하여야 한다.
  - 중복으로 인한 문제점
    - 일관성: 중복된 데이터 간에 내용이 일치하지 않는 상황이 발생하여 일관성이 없어진다.
    - 보안성: 중복되어 있는 모든 데이터에 동등한 보안수준을 유지하기 어렵다.
    - 경제성: 저장공간의 낭비와 동일한 데이터의 반복 작업으로 비용이 증가한다.
    - 무결성: 제어의 분산으로 데이터의 정확성을 유지할 수 없다.
- DBMS의 필수 기능
  1. 정의(Definition): 모든 응용 프로그램들이 요구하는 데이터 구조를 지원하기 위해 DB에 저장될 데이터의 type과 구조에 대한 정의, 이용방식, 제약조건 등을 명시하는 기능이다. 데이터와 데이터의 관계를 명확하게 명세할 수 있어야 하며 원하는 데이터 연산은 무엇이든 명세할 수 있어야 한다.
  2. 조작(Manipulation): 데이터 검색, 갱신, 삽입, 삭제 등을 체계적으로 처리하기 위해 사용자와 DB 사이의 인터페이스 수단을 제공하는 기능이다.
  3. 제어(Control): DB를 접근하는 갱신, 삽입, 삭제 작업이 정확하게 수행되어 데이터의 무결성이 유지되도록 해야한다. 정당한 사용자가 허가된 데이터만 접근할 수 있도록 보안을 유지하고 권한을 검사할 수 있어야 한다. 여러 사용자가 DB를 동시에 접근하여 데이터를 처리할 때 처리 결과가 항상 정확성을 유지하도록 병행제어(Concurrency Control)를 할 수 있어야 한다.

##### 스키마

- 스키마는 DB의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터의 집합이다.
- 스키마는 DB를 구성하는 데이터 개체(Entity), 속성(Atrribute), 관계(Relationship) 및 데이터 조작시 데이터 값들이 갖는 제약조건 등에 관해 전반적으로 정의한다.
- 스키마는 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나뉘어진다.

![스키마](https://t1.daumcdn.net/cfile/tistory/9936823A5B698C4023)

- 특징
  - 스키마는 데이터 사전(Data Dictionary)에 저장되며, 다른 이름으로 메타데이터 라고도 한다.
  - 스키마는 현실 세계의 특정한 한 부분의 표현으로서 특정 데이터 모델을 이용해서 만들어진다.
  - 스키마는 시간에 따라 불변인 특성을 갖는다.
  - 스키마는 데이터의 구조적 특성을 의마하며, 인스턴스에 의해 규정된다.
- 스키마의 3계층: DBMS는 외부적 스키마에 따라 명시된 사용자의 요구를 개념적 스키마에 적합한 형태로 변경하고 이를 다시 내부적 스키마에 적합한 형태로 변환한다.
  - 외부 스키마(External Schema) = 사용자 뷰
    - 외부스키마는 사용자나 응용프로그래머가 각 개인의 입장에서 필요로 하는 DB의 논리적 구조를 정의한 것이다.
    - 외부스키마는 전체 DB의 한 논리적인 부분으로 볼 수 있으므로 서브 스키마(Sub Schema)라고도 한다.
    - 하나의 DB 시스템에는 여러개의 외부스키마가 존재할 수 ㅣㅇㅆ으며, 하나의 외부 시ㅡ키마를 여러개의 응용 프로그램이나 사용자가 공용할 수도 있다.
    - 같은 DB에 대해서도 ㄷ서로 다른 관점을 정의할 수 있도록 허용한다.
    - 일반 사용자는 질의어(SQL)을 이용하여 DB를 쉽게 정의할 수 있다.
    - 응용 프로그래머는 C, JAVA 등의 언어를 사용하여 DB에 접근한다.
  - 개념 스키마(Conceptual Schema) = 전체적인 뷰
    - 개념 스키마는 DB의 전체적인 논리적 구조로서, 모든 응용 프로그램이나 사용자들이 필요로 하는 데이터를 종합한 조직 전체의 DB 하나만 존재한다.
    - 개념스키마는 개체간의 관계와 제약 조건을 나타내고 DB의 접근 권한, 보안 및 무결성 규칙에 관한 명세를 정의한다.
    - DB파일에 저장되는 데이터의 형태를 나타내는 것으로, 단순히 스키마 라고 하면 개념 스키마를 의미한다.
  - 내부 스키마(Internal Schema) = 저장 스키마
    - 내부 스키마는 물리적 저장장치의 입장에서 본 DB의 구조로, 물리적인 저장장치와 밀접한 계층이다.
    - 내부 스키마는 실제로 DB에 저장될 레코드의 물리적인 구조를 정의하고, 저장 데이터 항목의 표현방법, 내부 레코드의 물리적 순서등을 나타낸다.
    - 시스템 프로그래머나 시스템 설계자가 보는 관점의 스키마이다.

##### DB 언어란?(DDL, DML, DCL)

:: DB를 구축하고 이용하기 위한 DB시스템과의 통신수단. DBMS를 통해 사용되며, 기능과 사용 목적에 따라 세가지로 구분됨

1. 데이터 정의 언어(DDL)
   - DB구조, 데이터 형식, 접근 방식 등 DB를 구축하거나 수정할 목적으로 사용되는 언어 Ex) create, drop, alter
2. 데이터 조작언어(DML)
   - 사용자로 하여금 데이터를 처리할 수 있게 하는 도구로서, 사용자와 DBMS간의 인터페이스를 제공함. Ex) sql
3. 데이터 제어 언어(DCL)
   - 무결성, 보안 및 권한제외, 회복 등을 하기 위한 언어
   - 데이터를 보호하고 관리하는 목적으로 사용

##### 데이터 모델

:현실 세계의 정보들을 컴퓨터에 표현하기 위해서 단순화, 추상화 하여 체계적으로 표현한 개념적 모형. 데이터의 구조(Schema)를 논리적으로 묘사하기 위해 사용되는 지능적 도구

- 개념적 데이터 모델

  - 현실 세계에 대한 인간의 이해를 돕기 위해 현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정
  - 속성들로 기술된 개체 타입과 이 개체 타입들 간의 관계를 이용하여 현실세계를 표현.
  - 현실세계에 존재하는 개체를 인간이 이해할 수 있도록 정보 구조로 표현하기 때문에 정보모델 이라고도 함. 
  - Ex) E-R 모델

- 논리적 데이터 모델

  - 개념적 모델링 과정에서 얻은 개념적 구조를 컴퓨터가 이해하고 처리할 수 있는 컴퓨터 세계의 환경에 맞도록 변환하는 과정.
  - 필드로 기술된 데이터 타입과 이 데이터 타입들간의 관계를 이용하여 현실 세계를 표현함.
  - 단순히 데이터 모델이라고 하면 논리적 데이터 모델을 의미.
  - 특정 DBMS는 특정 논리적 데이터 모델 하나만 선정하여 사용함.
  - 논리적 데이터 모델은 데이터 간의 관계를 어떻게 표현하냐에 따라 관계모델, 계층모델, 네트워크모델로 구분함.

- 데이터 모델의 구성요소

  - 개체(Entity)
    - DB에 표현하려는 것으로, 사람이 생각하는 개념이나 정보 단위 같은 현실 세계의 대상체.
    - 실세계에 독립적으로 존재하는 유형, 무형의 정보로서 서로 연관된 몇 개 의 속성으로 구성됨.
    - 파일 시스템의 레코드에 대응하는 것으로, 어떤 정보를 제공하는 역할을 수행함.
    - 독립적으로 존재하거나 그 자체로서도 구별 가능함.
  - 속성(Attribute)
    - 데이터의 가장 작은 논리적 단위로서 파일 구조상의 데이터 항목 또는 데이터 필드에 해당
    - 속성은 개체를 구성하는 항목임.

  ![속성](https://t1.daumcdn.net/cfile/tistory/99CCD2345B69908607)

  위 그림은 교수번호, 성명, 전공, 소속으로 구성된 교수 개체이다.

  - 관계(Relation)
    - 개체 간의 관계 또는 속성 간의 관계

  ![관계](https://t1.daumcdn.net/cfile/tistory/9909D2365B69907A04)

  위 그림은 교수가 학생을 지도하는 관계이다.	

- 관계의 형태

  - 일대일: 개체 집합 A의 각 원소가 개체 집합 B의 원소 한개와 대응하는 관계
  - 일대다: 개체 집합 A의 원소는 개체 집합 B의 원소 여러개와 대응하고 있지만, 개체 집합 B의 각 원소는 개체 집합 A의 원소 한개와 대응하는 관계
  - 다대다: 개체 집합 A의 각 원소는 개체 집합 B의 여러개와 대응하고, 개체 집합 B의 각 원소도 개체 집합 A의 원소 여러개와 대응하는 관계

  ![관계도](https://t1.daumcdn.net/cfile/tistory/99DC9B3A5B69906F17)

- 데이터 모델에 표시할 요소
  - 구조(Structure): 논리적으로 표현된 개체 타입들 간의 관계로서, 데이터 구조 및 정적 성질을 표현함
  - 연산(Operation): DB에 저장된 실제 데이터를 처리하는 작업에 대한 명세로서 DB를 조작하는 기본도구.
  - 제약조건(Constaint): DB에 저장될 수 있는 실제 데이터의 논리적인 제약 조건.

##### DB 설계

- 고려사항
  - 무결성: 삽입, 삭제, 갱신 등의 연산 후에도 DB에 저장된 데이터가 정해진 제약조건을 항상 만족해야함
  - 일관성: DB에 저장된 데이터들 사이나, 특정 질의에 대한 응답이 처음부터 끝까지 변함없이 일정해야함.
  - 회복: 시스템에 장애가 발생했을 때 장애 발생 직전의 상태로 복구할 수 있어야함.
  - 보안: 불법적인 데이터의 노출 또는 변경이나 손실로부터 보호할 수 있어야함.
  - 효율성: 응답시간의 단축, 시스템의 생산성, 저장 공간의 최적화 등이 가능해야함
  - DB 확장: DB운영에 영향을 주지 않으면서 지속적으로 데이터를 추가할 수 있어야함.

##### Key의 종류

Key란?: DB에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 튜플들을 서로 구분할 수 있는 기준이 되는 애트리뷰트를 말함.

- 후보키(Candidate Key)

  - 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분집합. 즉, 기본키로 사용할 수 있는 속성들을 말함.
  - 하나의 릴레이션 내에서는 중복된 튜플들이 있을 수 없으므로 모든 릴레이션에는 반드시 하나 이상의 후보키가 존재한다.
  - 후보키는 릴레이션에 있는 모든 튜플에 대해서 유일성과 최소성을 만족시켜야한다.

  ```
  유일성: 하나의 키값으로 하나의 튜플만을 유일하게 식별할 수 있어야 한다.
  최소성: 모든 레코드들을 유일하게 식별하는데 꼭 필요한 속성만으로 구성되어 있어야 한다.
  ```

- 기본키(Primary Key)

  - 후보키 중에서 선택한 주키(Main Key)
  - 한 릴레이션에서 특정 튜플을 유일하게 구별할 수 있는 속성
  - NULL값을 가질 수 없음
  - 기본키로 정의된 속성에는 동일한 값이 중복되어 저장될 수 없음

- 대체키(Alternate Key)

  - 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키들을 말함. 보조키 라고도함

- 슈퍼키(Super Key)

  - 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키로서 릴레이션을구성하는 모든 튜플들 중 슈퍼키로 구성된 속성의 집합과 동일한 값을 나타내지 않는다.
  - 슈퍼키는 릴레이션을 구성하는 모든 튜플에 대해 유일성을 만족시키지만, 최소성은 만족시키지 못한다.

  ```
  최소성: 학번 + 주민번호를 사용하여 슈퍼키를 만들면 다른 튜플들과 구분할 수 있는 유일성은 만족하지만, 학번이나 주민번호 하나만 가지고도 다른 튜플들을 구분할 수 있으므로 최소성은 만족시키지 못한다.
  ```

- 외래키(Foregin Key)

  - 관계를 맺고있는 릴레이션 R1, R2에서 릴레이션 R1이 참조하고 있는 릴레이션 R2의 기본키와 같은 R1릴레이션의 속성을 외래키라고 한다.
  - 외래키가 참조되는 릴레이션의 기본키와 대응되어 릴레이션 간에 **참조 관계를 표현**하는데 중요한 도구이다.

##### 무결성

:무결성이란, DB에 저장된 데이터 값과 그것이 표현하는 현실 세계 실제값이 일치하는 정확성을 의미

- 종류
  - 널 무결성: 릴레이션의 특정 속성 값이 Null이 될 수 없도록 하는 규정
  - 고유 무결성: 릴레이션의 특정 속성에 대해서 각 튜플이 갖는 값들이 서로 달라야 한다는 규정
  - 참조 무결성: 외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 한다는 규정. 즉, 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 규정
  - 도메인 무결성: 특정 속성의 값이, 그 속성이 정의된 도메인에 속한 값이어야 한다는 규정
  - 키 무결성: 하나의 테이블에는 적어도 하나의 키가 존재해야 한다는 규정
- 무결성 제약조건
  - 개체 무결성: 릴레이션에서 기본키를 구성하는 속성은 Null 값이나 중복값을 가질 수 없다.
  - 참조 무결성: 외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 한다. 즉, 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다. 외래키와 참조하려는 테이블의 기본키는 도메인 속성 개수가 같아야 한다.

##### 뷰(View)

- 뷰는 사용자에게 접근이 허용된 자료만을 제한적으로 보여주기 위해 하나 이상의 기본 테이블로부터 유도된, 이름을 가지는 가상 테이블
- 뷰는 저장장치 내에 물리적으로 존재하진 않지만, 사용자에게 있는 것처럼 간주 됨.
- 뷰는 데이터 보정작업, 처리과정 시험 등 임시적인 작업을 위한 용도로 활용됨.
- 뷰는 조인문의 사용 최소화로 사용상의 편의성을 최대화 함.
- 장점
  - 논리적 데이터 독립성을 제공함
  - 동일 데이터에 대해 동시에 여러사용자의 상이한 응용이나 요구를 지원해줌
  - 사용자의 데이터 관리를 간단하게 해줌
  - 접근제어를 통한 자동 보안이 제공됨
- 단점
  - 독립적인 인덱스를 가질 수 없음
  - ALTER VIEW문을 사용할 수 없음. 즉, 뷰의 정의를 변경할 수 없음.
  - 뷰로 구성된 내용에 대한 삽입, 삭제, 갱신, 연산에 제약이 따름.

##### 트랜잭션(transaction)

:DB의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산들을 의미.

- 특징

  - DB 시스템에서 병행 제어 및 회복작업시 처리되는 작업의 논리적 단위
  - 사용자가 시스템에 대한 서비스 요구시 시스템이 응답하기 위한 상태 변환 과정의 작업단위.
  - 하나의 트랜잭션은 Commit 되거나 Rollback 됨

- 성질

  - Atomicity(원자성)
    - 트랜잭션의 연산은 DB에 모두 반영되든지 아니면 전혀 반영되지 않아야함.
    - 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 모두가 완벽히 수행되지 않고 어느 하나라도 오류가 발생하면 트랜잭션 전부가 취소 되어야함.
  - Consistency(일관성)
    - 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환함.
    - 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야함.
  - Isolation(독립성, 격리성)
    - 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행중에 다른 트랜잭션의 연산이 끼어들 수 없다.
    - 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.
  - Durablility(영속성, 지속성)
    - 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 한다.

- 연산 및 상태

  - Commit
    - 한개의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 끝났고 DB가 다시 일관된 상태에 있을 때, 이 트랜잭션이 행한 갱신 연산이 완료된 것을 관리자에게 알려주는 연산
  - Rollback
    - 하나의 트랜잭션 처리가 비정상적으로 종료되어 DB의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 행한 모든 연산을 취소(Unode)하는 연산.
    - Rollback시에는 해당 트랜잭션을 재시작하거나 폐기함.

  **트랜잭션의 상태**

  ![img](https://t1.daumcdn.net/cfile/tistory/999C55345B6D2ED308)

  - 활동(Active): 트랜잭션이 실행중인 상태
  - 실패(Failed): 트랜잭션 실행에 오류가 발생하여 중단된 상태
  - 철회(Aborted): 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
  - 부분 완료(Partially Committed): 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
  - 완료(Committed): 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태.